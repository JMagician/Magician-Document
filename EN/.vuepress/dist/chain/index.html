<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Magician-Web3 | Magician</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?2f2aea23853de6fd598eb881c87e9b10";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>
    <meta name="description" content="A Java development toolkit for most blockchain and web development scenarios">
    <meta name="keywords" content="Magician,Magician框架,小型服务框架,开源http服务,web开发,Java,开源项目,NIO,区块链开发,Web">
    
    <link rel="preload" href="/assets/css/0.styles.e1700646.css" as="style"><link rel="preload" href="/assets/js/app.e5c19d53.js" as="script"><link rel="preload" href="/assets/js/2.09610e94.js" as="script"><link rel="preload" href="/assets/js/8.b0091c09.js" as="script"><link rel="prefetch" href="/assets/js/10.064b5d6c.js"><link rel="prefetch" href="/assets/js/11.76b28cd0.js"><link rel="prefetch" href="/assets/js/12.8eb6dd98.js"><link rel="prefetch" href="/assets/js/13.985801a2.js"><link rel="prefetch" href="/assets/js/3.d341c646.js"><link rel="prefetch" href="/assets/js/4.b7b73457.js"><link rel="prefetch" href="/assets/js/5.136e2504.js"><link rel="prefetch" href="/assets/js/6.a9aa8f92.js"><link rel="prefetch" href="/assets/js/7.40a2a6e6.js"><link rel="prefetch" href="/assets/js/9.159df1a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e1700646.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Magician</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><span class="title">Github</span> <span class="arrow down"></span></button> <button type="button" aria-label="Github" class="mobile-dropdown-title"><span class="title">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Magician-blockchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Block Chain
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JMagician" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JMagician/Magician/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discussions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Document" class="dropdown-title"><span class="title">Document</span> <span class="arrow down"></span></button> <button type="button" aria-label="Document" class="mobile-dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/chain/index.html" class="nav-link">
  Block Chain
</a></li><li class="dropdown-item"><!----> <a href="/web/index.html" class="nav-link">
  Magician
</a></li><li class="dropdown-item"><!----> <a href="/db/index.html" class="nav-link">
  Magician-JDBC
</a></li><li class="dropdown-item"><!----> <a href="/web/magician-web.html" class="nav-link">
  Magician-Web
</a></li></ul></div></div><div class="nav-item"><a href="/sponsor/sponsor.html" class="nav-link">
  Sponsor
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Social Networks" class="dropdown-title"><span class="title">Social Networks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Social Networks" class="mobile-dropdown-title"><span class="title">Social Networks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/magicianio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/u/5453518101" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Weibo(@Beeruscc)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://magician-io.com/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://magician-io.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://beeruscc.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Golang
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><span class="title">Github</span> <span class="arrow down"></span></button> <button type="button" aria-label="Github" class="mobile-dropdown-title"><span class="title">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Magician-blockchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Block Chain
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JMagician" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JMagician/Magician/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discussions
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Document" class="dropdown-title"><span class="title">Document</span> <span class="arrow down"></span></button> <button type="button" aria-label="Document" class="mobile-dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/chain/index.html" class="nav-link">
  Block Chain
</a></li><li class="dropdown-item"><!----> <a href="/web/index.html" class="nav-link">
  Magician
</a></li><li class="dropdown-item"><!----> <a href="/db/index.html" class="nav-link">
  Magician-JDBC
</a></li><li class="dropdown-item"><!----> <a href="/web/magician-web.html" class="nav-link">
  Magician-Web
</a></li></ul></div></div><div class="nav-item"><a href="/sponsor/sponsor.html" class="nav-link">
  Sponsor
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Social Networks" class="dropdown-title"><span class="title">Social Networks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Social Networks" class="mobile-dropdown-title"><span class="title">Social Networks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/magicianio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/u/5453518101" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Weibo(@Beeruscc)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://magician-io.com/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://magician-io.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://beeruscc.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Golang
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Magician-Web3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chain/#initial-configuration" class="sidebar-link">Initial configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chain/#importing-dependencies" class="sidebar-link">Importing dependencies</a></li></ul></li><li><a href="/chain/#scan-blocks-and-listen-for-transaction-events" class="sidebar-link">Scan blocks and listen for transaction events</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chain/#create-a-listener" class="sidebar-link">Create a listener</a></li><li class="sidebar-sub-header"><a href="/chain/#start-a-task-that-scans-the-block-height" class="sidebar-link">Start a task that scans the block height</a></li><li class="sidebar-sub-header"><a href="/chain/#using-a-proxy-to-access-rpc-addresses" class="sidebar-link">Using a proxy to access RPC addresses</a></li></ul></li><li><a href="/chain/#web3j-extensions" class="sidebar-link">Web3j Extensions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chain/#coin-iquiry-and-transfer" class="sidebar-link">Coin iquiry and Transfer</a></li><li class="sidebar-sub-header"><a href="/chain/#inputdata-codec" class="sidebar-link">InputData Codec</a></li><li class="sidebar-sub-header"><a href="/chain/#contract-query-and-write" class="sidebar-link">Contract Query and Write</a></li></ul></li><li><a href="/chain/#the-project-has-several-built-in-functioncode" class="sidebar-link">The project has several built-in functionCode</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chain/#erc20" class="sidebar-link">ERC20</a></li><li class="sidebar-sub-header"><a href="/chain/#erc721" class="sidebar-link">ERC721</a></li><li class="sidebar-sub-header"><a href="/chain/#erc1155" class="sidebar-link">ERC1155</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="magician-web3"><a href="#magician-web3" class="header-anchor">#</a> Magician-Web3</h1> <p>Magician-web3 is a blockchain development toolkit. It consists of two functions. One is to scan the blockchain and monitor the transactions according to the developer's needs. The other is some secondary packaging of web3j, which can reduce the workload of developers in some common scenarios. It is planned to support three chains, ETH (BSC, POLYGAN, etc.), SOL and TRON</p> <p>He does not need to rely on Magician and can be used completely independently</p> <h2 id="initial-configuration"><a href="#initial-configuration" class="header-anchor">#</a> Initial configuration</h2> <h3 id="importing-dependencies"><a href="#importing-dependencies" class="header-anchor">#</a> Importing dependencies</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.yuyenews<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Magician-Web3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- This is the logging package, you must have it or the console will not see anything, any logging package that can bridge with slf4j is supported --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-jdk14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="scan-blocks-and-listen-for-transaction-events"><a href="#scan-blocks-and-listen-for-transaction-events" class="header-anchor">#</a> Scan blocks and listen for transaction events</h2> <h3 id="create-a-listener"><a href="#create-a-listener" class="header-anchor">#</a> Create a listener</h3> <p>You can create multiple listeners and set the listening conditions separately according to your needs</p> <h4 id="eth-bsc-poygan-etc-listener"><a href="#eth-bsc-poygan-etc-listener" class="header-anchor">#</a> ETH(BSC, Poygan, etc.) listener</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Create a class that implements the EthMonitorEvent interface and that's it!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventDemo</span> <span class="token keyword">implements</span> <span class="token class-name">EthMonitorEvent</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * Filter conditions, if you encounter a transaction that matches the conditions, the call method will be triggered automatically
     * These conditions are all and relations, must be satisfied at the same time to work
     * If you don't want to filter by a condition, just don't set a value for that condition.
     * If this method is not implemented, or returns null, then it means listening to any transaction
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFromAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x131231249813d334C58f2757037F68E2963C4crc&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Filtering transactions sent by fromAddress</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Filter toAddress or Contract Address Received Delivery易</span>
                <span class="token punctuation">.</span><span class="token function">setMinValue</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Filter the transactions with the number of sent coins &gt;= minValue</span>
                <span class="token punctuation">.</span><span class="token function">setMaxValue</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Filter transactions with the number of sent coins &lt;= maxValue</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// Filter by inputData</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span>ERC20<span class="token punctuation">.</span>TRANSFER<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// function signature (a method within the contract being called), supports arbitrary functions, the enumeration here is just a part of the standard contract functions</span>
                                <span class="token punctuation">.</span><span class="token function">setTypeReferences</span><span class="token punctuation">(</span> <span class="token comment">// List of parameters for this function (type only)</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
                                <span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">// Filter by the value of the parameter</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * If a transaction matching the above conditions is encountered, this method will be triggered
     * transactionModel.getEthTransactionModel() is a transaction object that contains all the data such as hash, value, from, to, etc.
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">TransactionModel</span> transactionModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> template <span class="token operator">=</span> <span class="token string">&quot;Scan to Eligible Transactions, hash:{0}, from:{1}, to: {2}, input: {3}&quot;</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{0}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBlockHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{1}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFrom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{2}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{3}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="input-data-filters-explained"><a href="#input-data-filters-explained" class="header-anchor">#</a> Input Data Filters Explained</h4> <p>If you want to trigger the monitor when a function in a contract is called</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Contract Address</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// Filter by input data</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span><span class="token string">&quot;0xadasasdf&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Called function code (first ten bits of inputData)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If there is a contract [0x552115849813d334C58f2757037F68E2963C4c5e], with a function transferFrom(address from, address to, uint256 amount)</p> <p>You want to implement a monitor: if someone uses this function in this contract to transfer tokens to [0x552115849813d334C58f2757037F68E2963C4c5e], it will trigger the Monitor event, then you can write it like this</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Contract Address</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// Filter by input data</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span>ERC20<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Called function code (first ten bits of inputData)</span>
                                <span class="token punctuation">.</span><span class="token function">setTypeReferences</span><span class="token punctuation">(</span> <span class="token comment">// List of parameters for this function (type only)</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Type of the first parameter</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Type of the second parameter</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// Type of the third parameter</span>
                                <span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">// filter the second parameter (to) = 0x552115849813d334C58f2757037F68E2963C4c5e</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="sol-tron-chain-s-scan-block-high-feature-under-development"><a href="#sol-tron-chain-s-scan-block-high-feature-under-development" class="header-anchor">#</a> SOL, TRON Chain's Scan Block High feature under development......</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Under</span> <span class="token class-name">Development</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="start-a-task-that-scans-the-block-height"><a href="#start-a-task-that-scans-the-block-height" class="header-anchor">#</a> Start a task that scans the block height</h3> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// Initialize the thread pool, the number of core threads must be &gt;= the number of chains you want to scan, it is recommended to equal the number of chains to be scanned</span>
<span class="token class-name">EventThreadPool</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Open a scan task, if you want to scan multiple chains, you can open multiple tasks, </span>
<span class="token comment">// by copying the following code and modifying the corresponding configuration you can open a new task</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">)</span> <span class="token comment">// RPC address of the node</span>
        <span class="token punctuation">.</span><span class="token function">setChainType</span><span class="token punctuation">(</span><span class="token class-name">ChainType</span><span class="token punctuation">.</span>ETH<span class="token punctuation">)</span> <span class="token comment">// Chain to be scanned (if set to ETH, then any other Ethernet standard chain such as BSC, POLYGAN, etc. can be scanned)</span>
        <span class="token punctuation">.</span><span class="token function">setScanPeriod</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span> <span class="token comment">// Interval of each round of scanning</span>
        <span class="token punctuation">.</span><span class="token function">setBeginBlockNumber</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">24318610</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// From which block height to start scanning</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Add Listening Events</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Add Listening Events</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Add Listening Events</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO SOL and TRON are not supported for now, under development......</span>
</code></pre></div><h3 id="using-a-proxy-to-access-rpc-addresses"><a href="#using-a-proxy-to-access-rpc-addresses" class="header-anchor">#</a> Using a proxy to access RPC addresses</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Use another overload of the setRpcUrl method and just pass in the proxy settings</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">Proxy<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>HTTP<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">4780</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ---------- In addition to the above, there are several overloads for the setRpcUrl method, so pick the right one according to your needs ----------</span>

<span class="token comment">// Pass directly into wei3j's HttpService</span>
<span class="token comment">// This method is the most customizable and is basically the way web3j is supposed to be used</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Pass in okHttpClient</span>
<span class="token comment">// This method is also very customizable and basically uses okHttp to access the blockchain node</span>
<span class="token class-name">OkHttpClient</span> okHttpClient <span class="token operator">=</span> xxxxxx<span class="token punctuation">;</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span>okHttpClient<span class="token punctuation">)</span> 
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Some proxies require authentication, so you can use this to set the username and password</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">,</span>
                            <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">Proxy<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>HTTP<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">4780</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token punctuation">(</span><span class="token class-name">Route</span> route<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

                                <span class="token comment">// Set the proxy server account password</span>
                                <span class="token class-name">String</span> credential <span class="token operator">=</span> <span class="token class-name">Credentials</span><span class="token punctuation">.</span><span class="token function">basic</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                        <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Proxy-Authorization&quot;</span><span class="token punctuation">,</span> credential<span class="token punctuation">)</span>
                                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                    <span class="token punctuation">)</span>
</code></pre></div><h2 id="web3j-extensions"><a href="#web3j-extensions" class="header-anchor">#</a> Web3j Extensions</h2> <p>Several basic methods have been extended on top of Web3j to reduce the workload of developers to a certain extent</p> <h3 id="coin-iquiry-and-transfer"><a href="#coin-iquiry-and-transfer" class="header-anchor">#</a> Coin iquiry and Transfer</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> privateKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Private key</span>
<span class="token class-name">Web3j</span> web3j <span class="token operator">=</span> <span class="token class-name">Web3j</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// RPC address of the chain</span>

<span class="token comment">// This approach is a single instance of</span>
<span class="token class-name">EthHelper</span> ethHelper <span class="token operator">=</span>  <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEth</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// If you want to create multiple EthHelper objects, you can do so in this way</span>
<span class="token class-name">EthHelper</span> ethHelper <span class="token operator">=</span> <span class="token class-name">EthHelper</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Balance Query</span>
<span class="token class-name">BigInteger</span> balance <span class="token operator">=</span> ethHelper<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// transfer</span>
<span class="token class-name">TransactionReceipt</span> transactionReceipt <span class="token operator">=</span> ethHelper<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>
            toAddress<span class="token punctuation">,</span> <span class="token comment">// Recipient's address</span>
            privateKey<span class="token punctuation">,</span> 
            <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Sending quantity</span>
            <span class="token class-name">Convert<span class="token punctuation">.</span>Unit</span><span class="token punctuation">.</span>ETHER <span class="token comment">// Units of quantity</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inputdata-codec"><a href="#inputdata-codec" class="header-anchor">#</a> InputData Codec</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// This approach is a single instance of</span>
<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// If you want to create multiple EthAbiCodec objects, you can do so in this way</span>
<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Encoding</span>
<span class="token class-name">String</span> inputData <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Method name</span>
            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Parameter 1</span>
            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Parameter 2，If there are other parameters, you can go ahead and pass in the next</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Decoding</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">decoderInputData</span><span class="token punctuation">(</span>
            <span class="token string">&quot;0x&quot;</span> <span class="token operator">+</span> inputData<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Removing  method signatures from inputData</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// The type of the parameter1 of the method being encoded</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// The type of the parameter2 of the method being encoded， If there are other parameters, you can go ahead and pass in the next</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Type</span> type <span class="token operator">:</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Get the method signature, which is actually the first ten characters of inputData, containing 0x.</span>
<span class="token comment">// Here only focus on the type of parameters, the value can be passed freely, because we need only the first ten characters, not the full inputData</span>
<span class="token class-name">String</span> functionCode <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">getFunAbiCode</span><span class="token punctuation">(</span>
            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Method name</span>
            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Parameter 1</span>
            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Parameter 2，If there are other parameters, you can go ahead and pass in the next</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="contract-query-and-write"><a href="#contract-query-and-write" class="header-anchor">#</a> Contract Query and Write</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> privateKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Private key</span>
<span class="token class-name">Web3j</span> web3j <span class="token operator">=</span> <span class="token class-name">Web3j</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// RPC address of the chain</span>

<span class="token comment">// This approach is a single instance of</span>
<span class="token class-name">EthContract</span> ethContract <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthContract</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// If you want to create multiple EthContract objects, you can do so in this way</span>
<span class="token class-name">EthContract</span> ethContract <span class="token operator">=</span> <span class="token class-name">EthContract</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Query</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> ethContract<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>
            contractAddress<span class="token punctuation">,</span> <span class="token comment">// Contract Address</span>
            ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;balanceOf&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Name of the method to be called</span>
                    <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span> <span class="token comment">// method, if there are multiple parameters, you can continue to pass the next parameter</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// The inputData of the method to be called</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// The return type of the method, if there is more than one return value, you can continue to pass the next parameter</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Write data to the contract</span>
<span class="token comment">// gasPrice, gasLimit two parameters, if you want to use the default value can not pass, or pass null</span>
<span class="token comment">// If not, don't pass both parameters, if you want to pass them, pass them together, if set to null, one can be null and one can have a value</span>
<span class="token class-name">SendResultModel</span> sendResultModel <span class="token operator">=</span> ethContract<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>
                    fromAddress<span class="token punctuation">,</span> <span class="token comment">// Address of the caller</span>
                    contractAddress<span class="token punctuation">,</span> <span class="token comment">// Contract Address</span>
                    privateKey<span class="token punctuation">,</span> <span class="token comment">// Private key of fromAddress</span>
                    <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1200000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// gasPrice，If you want to use the default value, you can pass null directly or leave this parameter out.</span>
                    <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;800000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// gasLimit，If you want to use the default value, you can pass null directly or leave this parameter out.</span>
                    ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
                            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Name of the method to be called</span>
                            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Parameter 1</span>
                            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Parameter 2，If there are other parameters, you can go ahead and pass in the next</span>
                    <span class="token punctuation">)</span> <span class="token comment">// The inputData of the method to be called</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

sendResultModel<span class="token punctuation">.</span><span class="token function">getEthSendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Results after sending a transaction</span>
sendResultModel<span class="token punctuation">.</span><span class="token function">getEthGetTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Results after the transaction is broadcast</span>
</code></pre></div><h2 id="the-project-has-several-built-in-functioncode"><a href="#the-project-has-several-built-in-functioncode" class="header-anchor">#</a> The project has several built-in functionCode</h2> <p>If you need to listen to these functions, then you can use them directly, as long as the functions in your contract have the same specification as Openzeppelin, and even the order of the parameter list must be the same</p> <h3 id="erc20"><a href="#erc20" class="header-anchor">#</a> ERC20</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC20<span class="token punctuation">.</span>TRANSFER<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC20<span class="token punctuation">.</span>APPROVE<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC20<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="erc721"><a href="#erc721" class="header-anchor">#</a> ERC721</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC721<span class="token punctuation">.</span>SAFE_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>SAFE_TRANSFER_FROM_TWO<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The one without the data parameter</span>
ERC721<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>APPROVE<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>SET_APPROVAL_FOR_ALL<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="erc1155"><a href="#erc1155" class="header-anchor">#</a> ERC1155</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC1155<span class="token punctuation">.</span>SET_APPROVAL_FOR_ALL<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC1155<span class="token punctuation">.</span>SAFE_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC1155<span class="token punctuation">.</span>SAFE_BATCH_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e5c19d53.js" defer></script><script src="/assets/js/2.09610e94.js" defer></script><script src="/assets/js/8.b0091c09.js" defer></script>
  </body>
</html>
