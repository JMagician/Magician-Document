<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Magician-Web3 | Magician</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?c99e92fd72d5a319e1864652d6a834f7";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>
    <meta name="description" content="一套Java开发的工具包，可以满足区块链 和 Web开发的大部分场景">
    <meta name="keywords" content="Magician,Magician框架,小型服务框架,开源http服务,web开发,Java,开源项目,NIO,区块链开发,Web">
    
    <link rel="preload" href="/cn/assets/css/0.styles.e8732725.css" as="style"><link rel="preload" href="/cn/assets/js/app.7486ea04.js" as="script"><link rel="preload" href="/cn/assets/js/2.09610e94.js" as="script"><link rel="preload" href="/cn/assets/js/8.7bae95c2.js" as="script"><link rel="prefetch" href="/cn/assets/js/10.f8b69bf3.js"><link rel="prefetch" href="/cn/assets/js/11.55ff56d3.js"><link rel="prefetch" href="/cn/assets/js/12.07928fc3.js"><link rel="prefetch" href="/cn/assets/js/13.6fb52f05.js"><link rel="prefetch" href="/cn/assets/js/3.d341c646.js"><link rel="prefetch" href="/cn/assets/js/4.b7b73457.js"><link rel="prefetch" href="/cn/assets/js/5.136e2504.js"><link rel="prefetch" href="/cn/assets/js/6.a9aa8f92.js"><link rel="prefetch" href="/cn/assets/js/7.08fbc96f.js"><link rel="prefetch" href="/cn/assets/js/9.9801acb4.js">
    <link rel="stylesheet" href="/cn/assets/css/0.styles.e8732725.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cn/" class="home-link router-link-active"><!----> <span class="site-name">Magician</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cn/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><span class="title">Github</span> <span class="arrow down"></span></button> <button type="button" aria-label="Github" class="mobile-dropdown-title"><span class="title">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Magician-blockchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  区块链
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JMagician" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JMagician/Magician/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社区
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cn/chain/index.html" class="nav-link">
  区块链
</a></li><li class="dropdown-item"><!----> <a href="/cn/web/index.html" class="nav-link">
  Magician
</a></li><li class="dropdown-item"><!----> <a href="/cn/db/index.html" class="nav-link">
  Magician-JDBC
</a></li><li class="dropdown-item"><!----> <a href="/cn/web/magician-web.html" class="nav-link">
  Magician-Web
</a></li></ul></div></div><div class="nav-item"><a href="/cn/sponsor/sponsor.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="社交平台" class="dropdown-title"><span class="title">社交平台</span> <span class="arrow down"></span></button> <button type="button" aria-label="社交平台" class="mobile-dropdown-title"><span class="title">社交平台</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/magicianio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/u/5453518101" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博(@Beeruscc)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://magician-io.com/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://magician-io.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://beeruscc.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Golang版本
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cn/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><span class="title">Github</span> <span class="arrow down"></span></button> <button type="button" aria-label="Github" class="mobile-dropdown-title"><span class="title">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Magician-blockchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  区块链
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JMagician" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Web
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/JMagician/Magician/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社区
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><span class="title">文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="文档" class="mobile-dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cn/chain/index.html" class="nav-link">
  区块链
</a></li><li class="dropdown-item"><!----> <a href="/cn/web/index.html" class="nav-link">
  Magician
</a></li><li class="dropdown-item"><!----> <a href="/cn/db/index.html" class="nav-link">
  Magician-JDBC
</a></li><li class="dropdown-item"><!----> <a href="/cn/web/magician-web.html" class="nav-link">
  Magician-Web
</a></li></ul></div></div><div class="nav-item"><a href="/cn/sponsor/sponsor.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="社交平台" class="dropdown-title"><span class="title">社交平台</span> <span class="arrow down"></span></button> <button type="button" aria-label="社交平台" class="mobile-dropdown-title"><span class="title">社交平台</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/magicianio" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/u/5453518101" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博(@Beeruscc)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://magician-io.com/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简体中文
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://magician-io.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  English
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://beeruscc.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Golang版本
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Magician-Web3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cn/chain/#初始化配置" class="sidebar-link">初始化配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/chain/#导入依赖" class="sidebar-link">导入依赖</a></li></ul></li><li><a href="/cn/chain/#扫块-监听交易事件" class="sidebar-link">扫块，监听交易事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/chain/#创建一个监听器" class="sidebar-link">创建一个监听器</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#开启一个扫块任务" class="sidebar-link">开启一个扫块任务</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#使用代理访问rpc地址" class="sidebar-link">使用代理访问RPC地址</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#配置多个rpc-url-实现负载均衡" class="sidebar-link">配置多个RPC URL 实现负载均衡</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#重试策略" class="sidebar-link">重试策略</a></li></ul></li><li><a href="/cn/chain/#web3j-扩展" class="sidebar-link">Web3j 扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/chain/#主链币查询以及转账" class="sidebar-link">主链币查询以及转账</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#inputdata-编解码" class="sidebar-link">InputData 编解码</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#合约查询-以及-写入" class="sidebar-link">合约查询 以及 写入</a></li></ul></li><li><a href="/cn/chain/#项目内置了几个functioncode" class="sidebar-link">项目内置了几个functionCode</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cn/chain/#erc20" class="sidebar-link">ERC20</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#erc721" class="sidebar-link">ERC721</a></li><li class="sidebar-sub-header"><a href="/cn/chain/#erc1155" class="sidebar-link">ERC1155</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="magician-web3"><a href="#magician-web3" class="header-anchor">#</a> Magician-Web3</h1> <p>Magician-Web3是一个用Java开发的扫描区块链的工具包，当我们在程序中需要一些功能时，它可以派上用场，比如说。</p> <ul><li><p>当一个地址收到ETH时，程序中的一个方法会被自动触发，这个交易会被传入该方法。</p></li> <li><p>当一个合约的某个功能被调用时（比如ERC20转账），它会自动触发程序中的一个方法，并将这个交易传递给这个方法。它甚至可以只在代币被转移到指定地址时被触发。</p></li> <li><p>当程序需要保留一个区块高度开始以来的所有交易记录时，也可以使用这个工具包。</p></li></ul> <p>它计划支持三种链，ETH（BSC，POLYGON等），SOL和TRON</p> <p>此外，还为Web3j做了一些二次打包，以减少开发者在某些场景下的工作负担</p> <h2 id="初始化配置"><a href="#初始化配置" class="header-anchor">#</a> 初始化配置</h2> <h3 id="导入依赖"><a href="#导入依赖" class="header-anchor">#</a> 导入依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.yuyenews<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Magician-Web3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- This is the logging package, you must have it or the console will not see anything, any logging package that can bridge with slf4j is supported --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-jdk14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="扫块-监听交易事件"><a href="#扫块-监听交易事件" class="header-anchor">#</a> 扫块，监听交易事件</h2> <h3 id="创建一个监听器"><a href="#创建一个监听器" class="header-anchor">#</a> 创建一个监听器</h3> <p>监听器 可以创建多个，根据你的需求 分别设置监听条件</p> <h4 id="eth-bsc-poygan-等-监听器"><a href="#eth-bsc-poygan-等-监听器" class="header-anchor">#</a> ETH(BSC, POYGAN 等)监听器</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 创建一个类，实现 EthMonitorEvent接口 即可
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventDemo</span> <span class="token keyword">implements</span> <span class="token class-name">EthMonitorEvent</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 筛选条件，如果遇到了符合条件的交易，会自动触发 call方法
     * 这些条件都是 并且的关系，必须要同时满足才行
     * 如果不想根据某个条件筛选，直接不给那个条件设置值就好了
     * 这个方法如果不实现，或者返回null， 那么就代表监听任意交易
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFromAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x131231249813d334C58f2757037F68E2963C4crc&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 筛选 fromAddress 发送的交易</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 筛选 toAddress 或 合约地址 收到的交易</span>
                <span class="token punctuation">.</span><span class="token function">setMinValue</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 筛选发送的主链币数量 &gt;= minValue 的交易</span>
                <span class="token punctuation">.</span><span class="token function">setMaxValue</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 筛选发送的主链币数量 &lt;= maxValue 的交易</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// 根据inputData筛选</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span>ERC20<span class="token punctuation">.</span>TRANSFER<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 函数签名（被调用的合约内的某方法）, 支持任意函数，这里的枚举只是一部分标准的合约函数</span>
                                <span class="token punctuation">.</span><span class="token function">setTypeReferences</span><span class="token punctuation">(</span> <span class="token comment">// 此方法的参数列表（仅类型）</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
                                <span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">// 筛选第几个参数 = 什么值</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 如果遇到了符合上面条件的交易，就会触发这个方法
     * transactionModel.getEthTransactionModel() 是一个交易对象，内部包含hash，value，from，to 等 所有的数据
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">TransactionModel</span> transactionModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> template <span class="token operator">=</span> <span class="token string">&quot;EventOne 扫描到了, hash:{0}, from:{1}, to: {2}, input: {3}&quot;</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{0}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBlockHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{1}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFrom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{2}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{3}&quot;</span><span class="token punctuation">,</span> transactionModel<span class="token punctuation">.</span><span class="token function">getEthTransactionModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="inputdatafilter-详解"><a href="#inputdatafilter-详解" class="header-anchor">#</a> InputDataFilter 详解</h4> <p>如果你想监控，某合约内的某函数 被调用的交易</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 合约地址</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// 根据inputData筛选</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span><span class="token string">&quot;0xadasasdf&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 被调用的函数编码（inputData前十位）</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果 有一个合约[0x552115849813d334C58f2757037F68E2963C4c5e], 里面有一个函数是 transferFrom(address from, address to, uint256 amount)</p> <p>你想 实现一个监控：如果有人用这个合约里的这个函数，将代币转给[0x552115849813d334C58f2757037F68E2963C4c5e]时，就触发 Monitor事件，那么你可以这样写</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EthMonitorFilter</span> <span class="token function">ethMonitorFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">EthMonitorFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setToAddress</span><span class="token punctuation">(</span><span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 合约地址</span>
                <span class="token punctuation">.</span><span class="token function">setInputDataFilter</span><span class="token punctuation">(</span> <span class="token comment">// 根据inputData筛选</span>
                        <span class="token class-name">InputDataFilter</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setFunctionCode</span><span class="token punctuation">(</span>ERC20<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 被调用的函数编码（inputData前十位）</span>
                                <span class="token punctuation">.</span><span class="token function">setTypeReferences</span><span class="token punctuation">(</span> <span class="token comment">// 此方法的参数列表（仅类型）</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第一个参数的类型</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 第二个参数的类型</span>
                                        <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 第三个参数的类型</span>
                                <span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;0x552115849813d334C58f2757037F68E2963C4c5e&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment">// 筛选第二个参数（to） = 0x552115849813d334C58f2757037F68E2963C4c5e</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="sol-tron-链的扫块正在开发中"><a href="#sol-tron-链的扫块正在开发中" class="header-anchor">#</a> SOL, TRON 链的扫块正在开发中......</h4> <div class="language-java extra-class"><pre class="language-java"><code>开发中<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="开启一个扫块任务"><a href="#开启一个扫块任务" class="header-anchor">#</a> 开启一个扫块任务</h3> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 初始化线程池，核心线程数必须 &gt;= 扫块的任务数量 + 重试策略的数量</span>
<span class="token class-name">EventThreadPool</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 开启一个扫块任务，如果你想扫描多个链，那么直接拷贝这段代码，并修改配置即可</span>
<span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span>
                <span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token comment">// 节点的RPC地址</span>
        <span class="token punctuation">.</span><span class="token function">setScanPeriod</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span> <span class="token comment">// 间隔多久，扫描下一个区块</span>
        <span class="token punctuation">.</span><span class="token function">setBeginBlockNumber</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">24318610</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 从哪个块高开始扫描</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 添加 监听事件</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 添加 监听事件</span>
        <span class="token punctuation">.</span><span class="token function">addEthMonitorEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventThree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 添加 监听事件</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO 暂时不支持SOL和TRON， 正在开发中......</span>
</code></pre></div><h3 id="使用代理访问rpc地址"><a href="#使用代理访问rpc地址" class="header-anchor">#</a> 使用代理访问RPC地址</h3> <h4 id="eth-bsc-ploygon-等-链的设置方法"><a href="#eth-bsc-ploygon-等-链的设置方法" class="header-anchor">#</a> ETH(BSC,PLOYGON 等) 链的设置方法</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 使用 addRpcUrl 方法的另一个重载，传入代理设置即可</span>
<span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">,</span>
                    <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">Proxy<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>HTTP<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">4780</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// ---------- 除了上面那种以外，addRpcUrl 方法一共有这么几种重载，根据你的需求挑选合适的方法 ----------</span>

<span class="token comment">// 直接传入 wei3j的HttpService</span>
<span class="token comment">// 这种方法 可定制化最高，基本上就是web3j本来的使用方式</span>
<span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 传入okHttpClient</span>
<span class="token comment">// 这种方法 可定制化程度也非常高，基本上就是使用okHttp访问 区块链节点了</span>
<span class="token class-name">OkHttpClient</span> okHttpClient <span class="token operator">=</span> xxxxxx<span class="token punctuation">;</span>
<span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span>okHttpClient<span class="token punctuation">)</span>

<span class="token comment">// 有些代理服务器 需要鉴权，可以使用这种方式来设置用户名和密码</span>
<span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">Proxy<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>HTTP<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">4780</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token class-name">Route</span> route<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

                <span class="token comment">//设置代理服务器账号密码</span>
                <span class="token class-name">String</span> credential <span class="token operator">=</span> <span class="token class-name">Credentials</span><span class="token punctuation">.</span><span class="token function">basic</span><span class="token punctuation">(</span><span class="token string">&quot;用户名&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;密码&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Proxy-Authorization&quot;</span><span class="token punctuation">,</span> credential<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
</code></pre></div><h4 id="sol-tron"><a href="#sol-tron" class="header-anchor">#</a> SOL, TRON</h4> <div class="language-java extra-class"><pre class="language-java"><code>开发中<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="配置多个rpc-url-实现负载均衡"><a href="#配置多个rpc-url-实现负载均衡" class="header-anchor">#</a> 配置多个RPC URL 实现负载均衡</h3> <p>调用addRpcUrl方法多次，传入多个RPC URL，即可实现负载均衡（轮询）</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRpcUrl</span><span class="token punctuation">(</span>
                <span class="token class-name">EthRpcInit</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-2-s1.binance.org:8545&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">addRpcUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s2.binance.org:8545&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token comment">// 节点的RPC地址</span>
</code></pre></div><h3 id="重试策略"><a href="#重试策略" class="header-anchor">#</a> 重试策略</h3> <p>在符合以下两个条件时，会发生重试，两个条件必须全都符合 才会触发重试</p> <ol><li>当前正在扫描的块高 是空的（块不存在 或者 块里面没交易）</li> <li>当前正在扫描的块高 &lt; 链上的最新块高</li></ol> <p>当上面两个条件同时符合的时候，扫描任务会跳过这个块，然后继续扫描下一个块，同时 重试策略会收到被跳过的块高，
你可以在重试策略里 自己处理</p> <h4 id="创建一个重试策略"><a href="#创建一个重试策略" class="header-anchor">#</a> 创建一个重试策略</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EthRetry</span> <span class="token keyword">implements</span> <span class="token class-name">RetryStrategy</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">retry</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span> blockNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="将重试策略添加到扫描任务中"><a href="#将重试策略添加到扫描任务中" class="header-anchor">#</a> 将重试策略添加到扫描任务中</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MagicianBlockchainScan</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRetryStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EthRetry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 调用这个方法添加</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="需要注意线程数量的配置"><a href="#需要注意线程数量的配置" class="header-anchor">#</a> 需要注意线程数量的配置</h4> <p>如果你此时开了一个扫块任务 + 一个 重试策略，那么需要占用两个线程，所以参数必须传2</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 初始化线程池，核心线程数必须 &gt;= 扫块的任务数量 + 重试策略的数量</span>
<span class="token class-name">EventThreadPool</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="web3j-扩展"><a href="#web3j-扩展" class="header-anchor">#</a> Web3j 扩展</h2> <p>在Web3j 的基础上进行了二次封装，扩展了几个基础的方法，可以在一定程度上减轻开发者的工作量</p> <h3 id="主链币查询以及转账"><a href="#主链币查询以及转账" class="header-anchor">#</a> 主链币查询以及转账</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> privateKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 私钥</span>
<span class="token class-name">Web3j</span> web3j <span class="token operator">=</span> <span class="token class-name">Web3j</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 链的RPC地址</span>

<span class="token comment">// 这种方式是单例的</span>
<span class="token class-name">EthHelper</span> ethHelper <span class="token operator">=</span>  <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEth</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果你想创建多个EthHelper对象，可以用这种方式</span>
<span class="token class-name">EthHelper</span> ethHelper <span class="token operator">=</span> <span class="token class-name">EthHelper</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 余额查询</span>
<span class="token class-name">BigInteger</span> balance <span class="token operator">=</span> ethHelper<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>fromAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转账</span>
<span class="token class-name">TransactionReceipt</span> transactionReceipt <span class="token operator">=</span> ethHelper<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>
            toAddress<span class="token punctuation">,</span>
            privateKey<span class="token punctuation">,</span> 
            <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Convert<span class="token punctuation">.</span>Unit</span><span class="token punctuation">.</span>ETHER
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="inputdata-编解码"><a href="#inputdata-编解码" class="header-anchor">#</a> InputData 编解码</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 这种方式是单例的</span>
<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果你想创建多个EthAbiCodec对象，可以直接new</span>
<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 编码</span>
<span class="token class-name">String</span> inputData <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 方法名</span>
            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 参数1</span>
            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 参数2，如果还有其他参数，可以继续传入下一个</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 解码</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">decoderInputData</span><span class="token punctuation">(</span>
            <span class="token string">&quot;0x&quot;</span> <span class="token operator">+</span> inputData<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 去除方法签名的inputData</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 被编码的方法的参数1 类型</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 被编码的方法的参数2 类型， 如果还有其他参数，可以继续传入下一个</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Type</span> type <span class="token operator">:</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取方法签名，其实就是inputData的前十位</span>
<span class="token class-name">String</span> functionCode <span class="token operator">=</span> ethAbiCodec<span class="token punctuation">.</span><span class="token function">getFunAbiCode</span><span class="token punctuation">(</span>
            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 方法名</span>
            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 参数1，值随意传，反正我们要的方法签名，不是完整的inputData</span>
            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 参数2，值随意传，反正我们要的方法签名，不是完整的inputData，如果还有其他参数，可以继续传入下一个</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="合约查询-以及-写入"><a href="#合约查询-以及-写入" class="header-anchor">#</a> 合约查询 以及 写入</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> privateKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 私钥</span>
<span class="token class-name">Web3j</span> web3j <span class="token operator">=</span> <span class="token class-name">Web3j</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;https://data-seed-prebsc-1-s1.binance.org:8545/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 链的RPC地址</span>

<span class="token comment">// 这种方式是单例的</span>
<span class="token class-name">EthContract</span> ethContract <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthContract</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果你想创建多个EthContract对象，可以用这种方式</span>
<span class="token class-name">EthContract</span> ethContract <span class="token operator">=</span> <span class="token class-name">EthContract</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>web3j<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token class-name">EthAbiCodec</span> ethAbiCodec <span class="token operator">=</span> <span class="token class-name">MagicianWeb3</span><span class="token punctuation">.</span><span class="token function">getEthBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEthAbiCodec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> ethContract<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>
            contractAddress<span class="token punctuation">,</span> <span class="token comment">// 合约地址</span>
            ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;balanceOf&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 要调用的方法名称</span>
                    <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span> <span class="token comment">// 方法的参数，如果有多个，可以继续传入下一个参数</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// 要调用的方法的inputData</span>
            <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Uint256</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 方法的返回类型，如果有多个返回值，可以继续传入下一个参数</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 往合约里写入数据</span>
<span class="token comment">// gasPrice，gasLimit 两个参数，如果想用默认值可以不传，或者传null</span>
<span class="token comment">// 如果不传的话，两个参数都必须不传，要传就一起传， 如果设置为null的话，可以一个为null，一个有值</span>
<span class="token class-name">SendResultModel</span> sendResultModel <span class="token operator">=</span> ethContract<span class="token punctuation">.</span><span class="token function">sendRawTransaction</span><span class="token punctuation">(</span>
                    fromAddress<span class="token punctuation">,</span> <span class="token comment">// 调用者的地址</span>
                    contractAddress<span class="token punctuation">,</span> <span class="token comment">// 合约地址</span>
                    privateKey<span class="token punctuation">,</span> <span class="token comment">// fromAddress的私钥</span>
                    <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1200000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// gasPrice，如果想用默认值 可以直接传null，或者不传这个参数</span>
                    <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;800000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// gasLimit，如果想用默认值 可以直接传null，或者不传这个参数</span>
                    ethAbiCodec<span class="token punctuation">.</span><span class="token function">getInputData</span><span class="token punctuation">(</span>
                            <span class="token string">&quot;transfer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 要调用的方法名称</span>
                            <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 方法的参数，如果有多个，可以继续传入下一个参数</span>
                            <span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;1000000000000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 方法的参数，如果有多个，可以继续传入下一个参数</span>
                    <span class="token punctuation">)</span> <span class="token comment">// 要调用的方法的inputData</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

sendResultModel<span class="token punctuation">.</span><span class="token function">getEthSendTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发送交易后的结果</span>
sendResultModel<span class="token punctuation">.</span><span class="token function">getEthGetTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 交易成功上链后的结果</span>
</code></pre></div><h2 id="项目内置了几个functioncode"><a href="#项目内置了几个functioncode" class="header-anchor">#</a> 项目内置了几个functionCode</h2> <p>如果你刚好要监听这几个函数，那么可以直接用，前提是你的合约里的函数必须跟 Openzeppelin 的规范一样，连参数列表的顺序都必须一样</p> <h3 id="erc20"><a href="#erc20" class="header-anchor">#</a> ERC20</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC20<span class="token punctuation">.</span>TRANSFER<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC20<span class="token punctuation">.</span>APPROVE<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC20<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="erc721"><a href="#erc721" class="header-anchor">#</a> ERC721</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC721<span class="token punctuation">.</span>SAFE_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>SAFE_TRANSFER_FROM_TWO<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没有data的那个</span>
ERC721<span class="token punctuation">.</span>TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>APPROVE<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC721<span class="token punctuation">.</span>SET_APPROVAL_FOR_ALL<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="erc1155"><a href="#erc1155" class="header-anchor">#</a> ERC1155</h3> <div class="language-java extra-class"><pre class="language-java"><code>ERC1155<span class="token punctuation">.</span>SET_APPROVAL_FOR_ALL<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC1155<span class="token punctuation">.</span>SAFE_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERC1155<span class="token punctuation">.</span>SAFE_BATCH_TRANSFER_FROM<span class="token punctuation">.</span><span class="token function">getFunctionCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cn/assets/js/app.7486ea04.js" defer></script><script src="/cn/assets/js/2.09610e94.js" defer></script><script src="/cn/assets/js/8.7bae95c2.js" defer></script>
  </body>
</html>
